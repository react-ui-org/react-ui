// See https://codepen.io/kevinweber/pen/dXWoRw
//
// 1. Do not escape the url brackets.

@use '../settings/escaped-characters';
@use 'string';

@function escape($string) {
  @if str-index($string, 'data:image/svg+xml') {
    @each $char, $encoded in escaped-characters.$map {

      // 1.
      @if str-index($string, 'url(') == 1 {
        $string: url('#{string.replace(str-slice($string, 6, -3), $char, $encoded)}');
      }

      @else {
        $string: string.replace($string, $char, $encoded);
      }
    }
  }

  @return $string;
}
